//// ----------------------------------------------------
//// > Table Definitions
//// ----------------------------------------------------

Table users {
  id bigserial [pk]
  full_name varchar(255) [not null]
  username varchar(100) [unique, not null]
  password_hash varchar(255) [not null]
  role user_role [not null, default: 'admin']
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  deleted_at timestamp
}

Table news {
  id bigserial [pk]
  title varchar(255) [not null]
  slug varchar(255) [unique, not null]
  content text [not null]
  featured_image_url varchar(255)
  status news_status [not null, default: 'draft']
  published_at timestamptz
  author_id bigint [not null]
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  deleted_at timestamp
}

Table village_officials {
  id bigserial [pk]
  name varchar(255) [not null]
  position varchar(255) [not null]
  photo_url varchar(255)
  bio text
  display_order int [not null, default: 0]
  hamlet_number int [note: 'Hamlet number for sorting (1, 2, 3...). Used for numeric hamlets and sorting pemekaran.']
  hamlet_name varchar(100) [note: 'Custom hamlet identifier (e.g., IX-A, Makmur). If null, hamlet_number will be converted to Roman numeral.']
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  deleted_at timestamp
  
  Note: '''
  Hamlet System:
  - hamlet_number: For sorting and pure numeric hamlets (1â†’I, 2â†’II, etc)
  - hamlet_name: For custom text (pemekaran: IX-A, IX-B; or names: Makmur, Sejahtera)
  - Display priority: hamlet_name if exists, else convert hamlet_number to Roman
  - Sorting: hamlet_number ASC NULLS LAST, hamlet_name ASC NULLS LAST
  '''
}

Table services {
  id bigserial [pk]
  service_name varchar(255) [not null]
  description text
  requirements text
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  deleted_at timestamp
}

Table potentials {
  id bigserial [pk]
  title varchar(255) [not null]
  description text
  cover_image_url varchar(255)
  type potential_type [not null, default: 'other']
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  deleted_at timestamp
}

Table site_settings {
  id bigserial [pk]
  setting_key varchar(100) [unique, not null]
  setting_value text
  setting_group varchar(50) [not null, default: 'general']
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  deleted_at timestamp
  
  Note: '''
  Groups:
  - general: site_name, site_description, site_logo, contact_email, contact_phone, contact_address
  - profile: village_name, village_head, village_vision, village_mission, village_history, village_area, village_population
  - social: facebook_url, instagram_url, twitter_url, youtube_url
  '''
}

Table hero_sliders {
  id bigserial [pk]
  title varchar(255) [not null]
  subtitle varchar(255)
  media_url varchar(255) [not null, note: 'URL to image or video']
  media_type media_type [not null, default: 'image', note: 'image or video']
  link_url varchar(255) [note: 'Optional CTA link']
  link_text varchar(100) [note: 'Optional CTA button text']
  display_order int [not null, default: 0]
  is_active boolean [not null, default: true]
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  deleted_at timestamp
  
  Note: 'Hero slider for homepage - supports images and videos'
}

Table contacts {
  id bigserial [pk]
  name varchar(255) [not null]
  email varchar(255) [not null]
  subject varchar(255) [not null]
  message text [not null]
  created_at timestamptz [not null, default: `now()`]
  updated_at timestamptz [not null, default: `now()`]
  deleted_at timestamptz
}

//// ----------------------------------------------------
//// > Enum Definitions
//// ----------------------------------------------------

Enum user_role {
  superadmin
  admin
  author
}

Enum news_status {
  draft
  published
  archived
}

Enum potential_type {
  umkm
  tourism
  agriculture
  other
}

Enum media_type {
  image
  video
}

//// ----------------------------------------------------
//// > Relationships
//// ----------------------------------------------------

Ref: news.author_id > users.id
